<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en' }}">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }} | {{ site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="{{ page.description | default: site.description | escape }}">
  <meta name="author" content="{{ site.author | escape }}">
  <meta name="color-scheme" content="light dark">

  <link rel="stylesheet" href="{{ '/assets/css/site.css' | relative_url }}">

  <!-- Prevent FOUC: apply saved theme before render -->
  <script>
    (function(){
      var t = localStorage.getItem('theme');
      if(t === 'dark') document.documentElement.setAttribute('data-theme','dark');
    })();
  </script>
</head>
<body{% if page.url == '/' or page.url == '/index.html' %} class="home"{% endif %}>

  <!-- Skip to main content -->
  <a class="skip-link" href="#main-content">Skip to main content</a>

  <!-- NAVIGATION -->
  <nav class="nav" aria-label="Main navigation">
    <div class="container nav__inner">
      <a class="brand" href="{{ '/' | relative_url }}">
        {{ site.title }}
      </a>

      <div class="nav__links">
        <a href="{{ '/team' | relative_url }}"{% if page.url == '/team' or page.url == '/team/' %} class="nav--active"{% endif %}>Team</a>
        <a href="{{ '/research' | relative_url }}"{% if page.url == '/research' or page.url == '/research/' %} class="nav--active"{% endif %}>Research</a>
        <a href="{{ '/publications' | relative_url }}"{% if page.url == '/publications' or page.url == '/publications/' %} class="nav--active"{% endif %}>Publications</a>
        <a href="{{ '/gallery' | relative_url }}"{% if page.url == '/gallery' or page.url == '/gallery/' %} class="nav--active"{% endif %}>Gallery</a>
        <a href="{{ '/contact' | relative_url }}"{% if page.url == '/contact' or page.url == '/contact/' %} class="nav--active"{% endif %}>Contact</a>

        <button class="theme-toggle" type="button" aria-label="Toggle dark mode">
          <!-- Moon icon (shown in light mode) -->
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
          </svg>
          <!-- Sun icon (shown in dark mode) -->
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- PAGE CONTENT -->
  <main id="main-content">
    {{ content }}
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container footer__grid">
      <div>
        <h3>{{ site.title }}</h3>
        <p class="small muted">
          Greenhouse Horticulture & Plant Factory Lab
        </p>
      </div>

      <div>
        <h4>Navigation</h4>
        <a href="{{ '/team' | relative_url }}">Team</a><br>
        <a href="{{ '/research' | relative_url }}">Research</a><br>
        <a href="{{ '/publications' | relative_url }}">Publications</a><br>
        <a href="{{ '/gallery' | relative_url }}">Gallery</a><br>
        <a href="{{ '/contact' | relative_url }}">Contact</a>
      </div>

      <div>
        <h4>Location</h4>
        <p class="small muted">1 Gwanak-ro, Gwanak-gu, Seoul, Republic of Korea (08826)</p>
      </div>
    </div>

    <div class="container footer__bottom small muted">
      Â© {{ site.time | date: "%Y" }} {{ site.title }}. All rights reserved.
    </div>
  </footer>

  <script>
    (function(){
      var btn = document.querySelector('.theme-toggle');
      if(!btn) return;
      btn.addEventListener('click', function(){
        var isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        if(isDark){
          document.documentElement.removeAttribute('data-theme');
          localStorage.setItem('theme','light');
        } else {
          document.documentElement.setAttribute('data-theme','dark');
          localStorage.setItem('theme','dark');
        }
      });
    })();
  </script>
</body>
</html>
